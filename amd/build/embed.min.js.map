{"version":3,"file":"embed.min.js","sources":["../src/embed.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Tiny Sketch plugin Embed class for Moodle.\n *\n * @module      tiny_sketch/embed\n * @copyright   2023 Matt Davidson <davidso1@rose-hulman.com>\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {get_string as getString} from 'core/str';\nimport * as ModalEvents from 'core/modal_events';\nimport Templates from 'core/templates';\nimport * as Modal from 'core/modal_factory';\nimport Config from 'core/config';\n\nexport const SketchEmbed = class {\n    editor = null;\n    canShowFilePicker = false;\n\n    /**\n     * @property {Object} The names of the alignment options.\n     */\n    helpStrings = null;\n\n    /**\n     * @property {boolean} Indicate that the user is updating the media or not.\n     */\n    isUpdating = false;\n\n    constructor(editor) {\n        this.editor = editor;\n    }\n\n    async displayDialogue() {\n        Modal.create({\n            type: Modal.types.DEFAULT,\n            title: getString('sketchtitle', 'tiny_sketch'),\n            body: Templates.render('tiny_sketch/sketch_iframe', {\n                src: this.getIframeURL()\n            })\n        }).then(modal => {\n            modal.getRoot().on(ModalEvents.hidden, () => {\n                modal.destroy();\n            });\n            modal.show();\n            document.querySelector('.modal-dialog').style.cssText = \"max-width: unset;width:100%;height:100vh;margin:0;padding:0;\";\n            document.querySelector('.modal-content').style.cssText = \"max-height: unset;height:100vh;\";\n            document.querySelector('.modal-body').style.cssText = \"padding:0\";\n            return modal;\n        }).catch();\n    }\n\n    getIframeURL = () => {\n        const url = new URL(`${Config.wwwroot}/lib/editor/tiny/plugins/sketch/miniPaint/sketch.html`);\n        return url.toString();\n    };\n};\n"],"names":["_interopRequireDefault","obj","__esModule","default","_getRequireWildcardCache","e","WeakMap","r","t","_interopRequireWildcard","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","_defineProperty","key","value","Symbol","toPrimitive","TypeError","String","Number","_toPrimitive","enumerable","configurable","writable","ModalEvents","_templates","Modal","_config","_exports","SketchEmbed","constructor","editor","URL","Config","wwwroot","toString","this","displayDialogue","create","type","types","DEFAULT","title","getString","body","Templates","render","src","getIframeURL","then","modal","getRoot","on","hidden","destroy","show","document","querySelector","style","cssText","catch"],"mappings":"wLA2BiC,SAAAA,uBAAAC,KAAAA,OAAAA,KAAAA,IAAAC,WAAAD,IAAAE,CAAAA,QAAAF,IAAA,CAAA,SAAAG,yBAAAC,GAAA,GAAA,mBAAAC,QAAA,OAAA,KAAA,IAAAC,EAAAD,IAAAA,QAAAE,EAAAF,IAAAA,eAAAF,yBAAA,SAAAC,GAAAA,OAAAA,EAAAG,EAAAD,IAAAF,EAAA,CAAA,SAAAI,wBAAAJ,EAAAE,GAAAA,IAAAA,GAAAF,GAAAA,EAAAH,kBAAAG,EAAA,GAAA,OAAAA,GAAA,iBAAAA,GAAA,mBAAAA,EAAA,MAAA,CAAAF,QAAAE,GAAA,IAAAG,EAAAJ,yBAAAG,GAAAC,GAAAA,GAAAA,EAAAE,IAAAL,GAAAG,OAAAA,EAAAG,IAAAN,GAAAO,IAAAA,GAAAC,UAAA,MAAAC,EAAAC,OAAAC,gBAAAD,OAAAE,yBAAA,IAAA,IAAAC,KAAAb,EAAA,GAAA,YAAAa,GAAAH,OAAAI,UAAAC,eAAAC,KAAAhB,EAAAa,GAAAI,CAAAA,IAAAA,EAAAR,EAAAC,OAAAE,yBAAAZ,EAAAa,GAAA,KAAAI,IAAAA,EAAAX,KAAAW,EAAAC,KAAAR,OAAAC,eAAAJ,EAAAM,EAAAI,GAAAV,EAAAM,GAAAb,EAAAa,EAAA,CAAA,OAAAN,EAAAT,QAAAE,EAAAG,GAAAA,EAAAe,IAAAlB,EAAAO,GAAAA,CAAA,CAAA,SAAAY,gBAAAvB,IAAAwB,IAAAC,OAAA,IAAAJ,SAAAG,IAAA,iBAAAH,EAAA,SAAAd,EAAAD,uBAAAC,IAAAA,EAAAA,OAAAA,MAAAH,EAAAG,EAAAmB,OAAAC,aAAA,QAAA,IAAAvB,EAAAiB,CAAAA,IAAAA,EAAAjB,EAAAgB,KAAAb,EAAAD,GAAA,WAAA,GAAA,iBAAAe,EAAAA,OAAAA,YAAAO,UAAA,+CAAA,CAAA,OAAA,WAAAtB,EAAAuB,OAAAC,QAAAvB,EAZjC;;;;;;;GAYiCwB,CAAAP,IAAA,WAAAH,EAAAQ,OAAAR,MAAArB,IAAAc,OAAAC,eAAAf,IAAAwB,IAAA,CAAAC,MAAAA,MAAAO,YAAA,EAAAC,cAAAC,EAAAA,cAAAlC,IAAAwB,KAAAC,MAAAzB,GAAA,qFAHjCmC,YAAA3B,wBAAA2B,aACAC,WAAArC,uBAAAqC,YACAC,MAAA7B,wBAAA6B,OACAC,QAAAvC,uBAAAuC,SAEwBC,SAAAC,YAAG,MAcvBC,WAAAA,CAAYC,QAAQnB,8BAbX,MAAIA,0CACO,GAAKA,mCAKX,MAAIA,mCAKL,GAAKA,qCAyBH,IACC,IAAIoB,IAAK,GAAEC,QAAM1C,QAAC2C,gEACnBC,aAxBXC,KAAKL,OAASA,MAClB,CAEA,qBAAMM,GACFX,MAAMY,OAAO,CACTC,KAAMb,MAAMc,MAAMC,QAClBC,OAAO,EAAAC,KAAAA,YAAU,cAAe,eAChCC,KAAMC,WAAStD,QAACuD,OAAO,4BAA6B,CAChDC,IAAKX,KAAKY,mBAEfC,MAAKC,QACJA,MAAMC,UAAUC,GAAG5B,YAAY6B,QAAQ,KACnCH,MAAMI,SAAS,IAEnBJ,MAAMK,OACNC,SAASC,cAAc,iBAAiBC,MAAMC,QAAU,+DACxDH,SAASC,cAAc,kBAAkBC,MAAMC,QAAU,kCACzDH,SAASC,cAAc,eAAeC,MAAMC,QAAU,YAC/CT,SACRU,OACP,EAMF"}